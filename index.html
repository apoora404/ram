<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Sollong í†µí•© ê³„ì‚°ê¸°</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    font-family: 'Arial', sans-serif;
    max-width: 900px; /* ì „ì²´ ë ˆì´ì•„ì›ƒì˜ ìµœëŒ€ ë„ˆë¹„ */
    margin: 30px auto;
    padding: 0 20px;
    background: linear-gradient(135deg, #0e0e1e, #1a0f2b);
    color: #e0e6f0;
    box-sizing: border-box;
    display: flex;
    justify-content: center;
  }
  /* âœ… ë©”ì¸ í˜ì´ì§€ ë ˆì´ì•„ì›ƒ (ê³„ì‚°ê¸° + ì‚¬ì´ë“œë°”) */
  .main-page-layout {
    display: flex;
    gap: 25px; /* ê³„ì‚°ê¸°ì™€ ì‚¬ì´ë“œë°” ê°„ê²© */
    flex-wrap: wrap; /* ê³µê°„ ë¶€ì¡± ì‹œ ì¤„ë°”ê¿ˆ */
    max-width: 900px; /* ì „ì²´ ìµœëŒ€ ë„ˆë¹„ (ë” ì´ìƒ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ì¶©ë¶„íˆ í™•ë³´) */
    width: 100%;
  }
  h2 {
    text-align: center;
    color: #8c7eff;
    font-size: 28px;
    margin-bottom: 25px;
    text-shadow: 0 0 5px rgba(140, 126, 255, 0.5);
  }
  /* âœ… ê³„ì‚°ê¸° ì¹´ë“œ ë„ˆë¹„ ê³ ì • ë° ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ ì„¤ì • */
  .card {
    width: 450px; /* âœ… ê³„ì‚°ê¸° ì¹´ë“œì˜ ê³ ì • ë„ˆë¹„ */
    flex-shrink: 0; /* âœ… ê³µê°„ ë¶€ì¡± ì‹œ ì¤„ì–´ë“¤ì§€ ì•ŠìŒ */
    background: #1e1430;
    padding: 25px;
    border-radius: 18px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.6), inset 0 0 8px rgba(140, 126, 255, 0.1);
    border: 1px solid #8c7eff33;
  }
  label {
    display: block;
    margin-top: 15px;
    margin-bottom: 5px;
    font-weight: bold;
    color: #c9d2e0;
    font-size: 15px;
  }
  input {
    max-width: 200px;
    width: 100%;
    padding: 12px 15px;
    margin-top: 5px;
    border: 1px solid #8c7eff55;
    border-radius: 10px;
    background: #120c24;
    color: #e0e6f0;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
    box-sizing: border-box;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
  }
  input::placeholder {
    color: #8a96a8;
  }
  select:not(#hash) {
    max-width: 200px;
    width: 100%;
    padding: 12px 15px;
    margin-top: 5px;
    border: 1px solid #8c7eff55;
    border-radius: 10px;
    background: #120c24;
    color: #e0e6f0;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
    box-sizing: border-box;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background-image: url('data:image/svg+xml;utf8,<svg fill="%23e0e6f0" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
    background-repeat: no-repeat;
    background-position: right 8px top 50%;
    background-size: 16px;
  }
  select#hash {
    width: 100%;
    padding: 12px 15px;
    margin-top: 5px;
    border: 1px solid #8c7eff55;
    border-radius: 10px;
    background: #120c24;
    color: #e0e6f0;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
    box-sizing: border-box;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background-image: url('data:image/svg+xml;utf8,<svg fill="%23e0e6f0" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
    background-repeat: no-repeat;
    background-position: right 8px top 50%;
    background-size: 16px;
  }
  button {
    margin-top: 30px;
    width: 100%;
    padding: 16px;
    background: linear-gradient(45deg, #8c7eff, #6a4ef7);
    color: white;
    font-size: 18px;
    font-weight: bold;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(140, 126, 255, 0.4);
  }
  button:hover {
    opacity: 0.95;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(140, 126, 255, 0.6);
  }
  #resultRam, #resultCpi {
    margin-top: 30px;
  }
  .result-section {
    margin-bottom: 20px;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  }
  .result-title {
    font-weight: bold;
    font-size: 18px;
    margin-bottom: 10px;
    padding-bottom: 5px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    color: #5effc9;
  }
  .result-item {
    margin: 8px 0;
    color: #d8e0e8;
    font-size: 16px;
  }
  .highlight {
    font-weight: bold;
    font-size: 17px;
    color: #5effc9;
    text-shadow: 0 0 3px rgba(94, 255, 201, 0.5);
  }
  .main-box {background:#1f1636; border:1px solid #4e8ef7; color:#d8e0e8;}
  .bonus-box {background:#2a1b42; border:1px solid #8c63ff; color:#d8e0e8;}
  .total-box {background:#202a3a; border:1px solid #2fd4b5; color:#d8e0e8;}
  
  .main-box .result-title, .cpi-main-box .result-title { color: #4e8ef7; }
  .bonus-box .result-title, .cpi-bonus-box .result-title { color: #8c63ff; }
  .total-box .result-title, .cpi-summary-box .result-title { color: #2fd4b5; }

  .alert-box {
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 10px;
    font-weight: bold;
    text-align: center;
    font-size: 16px;
  }
  .alert-warning {
    background: #3a1a1a;
    color: #ff6b6b;
    border: 1px solid #ff4d4d;
  }
  .cpi-promo-checkbox, .ram-promo-checkbox {
    display: flex;
    align-items: center;
    margin-top: 15px;
    cursor: pointer;
    font-weight: bold;
    color: #c9d2e0;
  }
  .cpi-promo-checkbox input, .ram-promo-checkbox input {
    max-width: 20px;
    width: auto;
    margin-right: 10px;
    box-shadow: none;
    border-radius: 4px;
    appearance: checkbox;
    -webkit-appearance: checkbox;
    -moz-appearance: checkbox;
  }

  .date-select-group {
    display: flex;
    gap: 10px;
    margin-top: 5px;
  }
  .date-select-group select {
    flex: 1;
  }

  .tabs {
    display: flex;
    justify-content: center;
    margin-bottom: 25px;
    background: #1e1430;
    border-radius: 18px;
    padding: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
  }
  .tab-button {
    flex: 1;
    padding: 12px 0;
    text-align: center;
    background: none;
    border: none;
    color: #c9d2e0;
    font-size: 17px;
    font-weight: bold;
    cursor: pointer;
    border-radius: 12px;
    transition: all 0.3s ease;
  }
  .tab-button.active {
    background: linear-gradient(45deg, #8c7eff, #6a4ef7);
    color: white;
    box-shadow: 0 3px 10px rgba(140, 126, 255, 0.4);
  }
  .tab-content {
    display: none;
  }
  .tab-content.active {
    display: block;
  }

  /* âœ… í”„ë¡œëª¨ì…˜ ìƒì„¸ ì‚¬ì´ë“œë°” ìŠ¤íƒ€ì¼ (ë©”ì¸ ë ˆì´ì•„ì›ƒ ì•ˆì—) */
  .promo-details-main-sidebar {
    flex-grow: 0;
    flex-shrink: 0;
    width: 380px; /* ì‚¬ì´ë“œë°” ë„ˆë¹„ ê³ ì • */
    /* âœ… ë°•ìŠ¤ ìŠ¤íƒ€ì¼ ëª¨ë‘ ì œê±° */
    /* background: #1e1430; */ 
    /* padding: 30px; */ 
    /* border-radius: 18px; */ 
    /* box-shadow: 0 8px 20px rgba(0,0,0,0.6), inset 0 0 8px rgba(140, 126, 255, 0.05); */ 
    /* border: 1px solid #8c7eff33; */ 
    box-sizing: border-box;
    display: flex; /* ë‚´ë¶€ ì½˜í…ì¸  ì •ë ¬ì„ ìœ„í•´ flex ì‚¬ìš© */
    align-items: center; /* ì´ë¯¸ì§€ë¥¼ ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
    justify-content: center; /* ì´ë¯¸ì§€ë¥¼ ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
    min-height: 400px; /* âœ… ì‚¬ì´ë“œë°” ìµœì†Œ ë†’ì´ í™•ë³´ (ì´ë¯¸ì§€ë³´ë‹¤ ì‘ìœ¼ë©´ ì•ˆë¨) */
  }
  /* âœ… ì‚¬ì´ë“œë°” ë‚´ë¶€ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
  .promo-details-main-sidebar img {
    width: 100%; /* ë„ˆë¹„ 100%ë¡œ ê°•ì œ ì¡°ì ˆ (ì‚¬ì´ë“œë°” ë„ˆë¹„ 380pxì— ë§ì¶°ì§) */
    height: auto; /* ë†’ì´ ìë™ ì¡°ì ˆ */
    /* border-radius: 10px; */ /* ì´ë¯¸ì§€ ìì²´ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ ì œê±°ì— ë”°ë¼ ë‘¥ê·¼ ëª¨ì„œë¦¬ë„ ì œê±° */
  }


  /* ë°˜ì‘í˜• ë””ìì¸ */
  @media (max-width: 899px) { /* ì „ì²´ ë ˆì´ì•„ì›ƒì´ ì¢ì•„ì§€ë©´ ì‚¬ì´ë“œë°”ë¥¼ ì•„ë˜ë¡œ */
    .main-page-layout {
      flex-direction: column;
      max-width: 600px; /* ì»¬ëŸ¼ìœ¼ë¡œ ë°”ë€Œë©´ ì¹´ë“œ ìµœëŒ€ ë„ˆë¹„ */
    }
    .card {
      min-width: unset; /* ìµœì†Œ ë„ˆë¹„ ì œí•œ í•´ì œ */
    }
    .promo-details-main-sidebar {
      width: 100%; /* ì „ì²´ ë„ˆë¹„ */
      order: 1; /* ì‚¬ì´ë“œë°”ë¥¼ ìœ„ë¡œ ì´ë™ */
      min-height: unset; /* ë‚´ìš©ì´ ì´ë¯¸ì§€ í•˜ë‚˜ì´ë¯€ë¡œ ìµœì†Œ ë†’ì´ ë¶ˆí•„ìš” */
    }
    .tabs { order: 2; } /* íƒ­ì„ ì‚¬ì´ë“œë°” ì•„ë˜ë¡œ ì´ë™ */
    #cpiCalculator, #ramCalculator { order: 3; } /* ê³„ì‚°ê¸° ì½˜í…ì¸ ë¥¼ íƒ­ ì•„ë˜ë¡œ ì´ë™ */
  }

  @media (max-width: 480px) { /* ëª¨ë°”ì¼ì—ì„œ ë” ì„¸ë¶€ ì¡°ì • */
    body {
      padding: 15px;
    }
    .card {
      padding: 18px;
    }
    h2 {
      font-size: 24px;
    }
    button {
      font-size: 16px;
      padding: 12px;
    }
    .result-section {
      padding: 15px;
    }
    .result-title {
      font-size: 16px;
    }
    .result-item, .highlight {
      font-size: 14px;
    }
    .date-select-group {
      flex-direction: column;
    }
    input[type="number"],
    .date-select-group select {
      max-width: 100%;
    }
    .tabs {
      flex-direction: column;
      gap: 10px;
    }
    .tab-button {
      width: 100%;
    }
  }
</style>
</head>
<body>
<div class="main-page-layout">
  <div class="card">
    <div class="tabs">
      <button class="tab-button active" data-tab="cpi">CPI ê³„ì‚°ê¸°</button>
      <button class="tab-button" data-tab="ram">RAM ê³„ì‚°ê¸°</button>
    </div>

    <div id="cpiCalculator" class="tab-content active">
      <div class="input-area">
        <h2>CPI ê³„ì‚°ê¸°</h2>

        <label>ì´ˆê¸° CPI ì…ê¸ˆì•¡(USDT):</label>
        <input type="number" id="initialInvest" placeholder="ì˜ˆ: 5000">
        
        <label class="cpi-promo-checkbox">
            <input type="checkbox" id="applyCpiPromotion">
            <span>CPI í”„ë¡œëª¨ì…˜ ì ìš© (1000 USDT ì´ìƒ ì¶©ì „ ì‹œ 10% USDL ë³´ë„ˆìŠ¤)</span>
        </label>

        <label>CPI ìŠ¤í…Œì´í‚¹ ì‹œì‘ì¼ (2025ë…„):</label>
        <div class="date-select-group">
          <select id="cpiStartMonth"></select>
          <select id="cpiStartDay"></select>
        </div>

        <button onclick="calculateCpiGrowth()">ê³„ì‚°í•˜ê¸°</button>
        <div id="resultCpi"></div>
      </div>
    </div>

    <div id="ramCalculator" class="tab-content">
      <div class="input-area">
        <h2>RAM ê³„ì‚°ê¸°</h2>

        <label>í• ë‹¹ ê¸ˆì•¡(USDT):</label>
        <input type="number" id="invest" placeholder="ì˜ˆ: 5000">

        <label>í• ë‹¹ ê¸°ê°„(ì¼):</label>
        <input type="number" id="days" placeholder="ì˜ˆ: 120">

        <label>ìŠ¤í…Œì´í‚¹ ì‹œì‘ì¼ (2025ë…„):</label>
        <div class="date-select-group">
          <select id="ramStartMonth"></select>
          <select id="ramStartDay"></select>
        </div>

        <label>í•´ì‹œë ˆì´íŠ¸ êµ¬ê°„:</label>
        <select id="hash">
          <option value="1">1M ~ 5M</option>
          <option value="1.05">5M ~ 8M</option>
          <option value="1.1025">8M ~ 16M</option>
          <option value="1.157625">16M ~ 25M</option>
          <option value="1.21550625">25M ~ 50M</option>
          <option value="1.27628157">50M+</option>
        </select>

        <label class="ram-promo-checkbox">
            <input type="checkbox" id="applyRamPromotion">
            <span>RAM í”„ë¡œëª¨ì…˜ ì ìš©</span>
        </label>
        
        <button onclick="calculateRam()">ê³„ì‚°í•˜ê¸°</button>
        <div id="resultRam"></div>
      </div>
    </div>
  </div>

  <div class="promo-details-main-sidebar" id="promoSidebar">
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const promoSidebar = document.getElementById('promoSidebar');

  // í”„ë¡œëª¨ì…˜ ìƒì„¸ ì´ë¯¸ì§€ (HTML ë¬¸ìì—´ë¡œ ì €ì¥)
  const cpiPromoImageHtml = `<img src="https://raw.githubusercontent.com/apoora404/ram/main/cpi%20%ED%94%84%EB%A1%9C%EB%AA%A8%EC%85%98.jpg?raw=true" alt="CPI í”„ë¡œëª¨ì…˜ ì•ˆë‚´">`;
  const ramPromoImageHtml = `<img src="https://raw.githubusercontent.com/apoora404/ram/main/ram%20%ED%94%84%EB%A1%9C%EB%AA%A8%EC%85%98.jpg?raw=true" alt="RAM í”„ë¡œëª¨ì…˜ ì•ˆë‚´">`;

  // íƒ­ ê¸°ëŠ¥ êµ¬í˜„
  const tabButtons = document.querySelectorAll('.tab-button');
  const tabContents = document.querySelectorAll('.tab-content');

  function switchTab(targetTab) {
    tabButtons.forEach(btn => btn.classList.remove('active'));
    document.querySelector(`.tab-button[data-tab="${targetTab}"]`).classList.add('active');

    tabContents.forEach(content => content.classList.remove('active'));
    document.getElementById(targetTab + 'Calculator').classList.add('active');

    // ì‚¬ì´ë“œë°” ë‚´ìš© ì´ë¯¸ì§€ë¡œ ì—…ë°ì´íŠ¸
    if (targetTab === 'cpi') {
      promoSidebar.innerHTML = cpiPromoImageHtml;
    } else if (targetTab === 'ram') {
      promoSidebar.innerHTML = ramPromoImageHtml;
    }
  }

  tabButtons.forEach(button => {
    button.addEventListener('click', () => {
      switchTab(button.dataset.tab);
    });
  });

  // ì´ˆê¸° íƒ­ ì„¤ì • (CPI ê³„ì‚°ê¸°)
  switchTab('cpi');


  // ==========================================================
  // RAM ê³„ì‚°ê¸° ë¡œì§
  // ==========================================================
  const ramStartMonthSelect = document.getElementById("ramStartMonth");
  const ramStartDaySelect = document.getElementById("ramStartDay");

  function populateRamDays(month, year) {
    ramStartDaySelect.innerHTML = '';
    const daysInMonth = new Date(year, month, 0).getDate();
    for (let i = 1; i <= daysInMonth; i++) {
      const option = document.createElement("option");
      option.value = i.toString().padStart(2, '0');
      option.textContent = i + "ì¼";
      ramStartDaySelect.appendChild(option);
    }
  }
  for (let i = 1; i <= 12; i++) {
    const option = document.createElement("option");
    option.value = i.toString().padStart(2, '0');
    option.textContent = i + "ì›”";
    ramStartMonthSelect.appendChild(option);
  }
  ramStartMonthSelect.addEventListener("change", function() {
    const selectedMonth = parseInt(this.value);
    populateRamDays(selectedMonth, 2025);
  });
  const todayRam = new Date();
  const currentRamMonth = todayRam.getMonth() + 1;
  const currentRamDay = todayRam.getDate();
  ramStartMonthSelect.value = currentRamMonth.toString().padStart(2, '0');
  populateRamDays(currentRamMonth, 2025);
  ramStartDaySelect.value = currentRamDay.toString().padStart(2, '0');


  const dayBonusTable = [
    {day:81, bonus:1.00}, {day:161, bonus:1.01}, {day:240, bonus:1.02},
    {day:320, bonus:1.03}, {day:401, bonus:1.04}, {day:480, bonus:1.05},
    {day:561, bonus:1.06}, {day:641, bonus:1.07}, {day:720, bonus:1.08},
    {day:801, bonus:1.09}, {day:881, bonus:1.10}, {day:960, bonus:1.11},
    {day:1041, bonus:1.12}, {day:1121, bonus:1.13}, {day:1200, bonus:1.14},
    {day:1281, bonus:1.15}, {day:1361, bonus:1.16}, {day:1440, bonus:1.17},
    {day:1521, bonus:1.18}, {day:1601, bonus:1.19}, {day:1680, bonus:1.20},
    {day:1761, bonus:1.21}, {day:1841, bonus:1.22}, {day:1920, bonus:1.23},
    {day:2001, bonus:1.24}, {day:2081, bonus:1.25}, {day:2160, bonus:1.26},
    {day:2241, bonus:1.27}, {day:2320, bonus:1.28}, {day:2399, bonus:1.29},
    {day:2400, bonus:1.30}
  ];

  function getDayBonus(days) {
    let bonus = 1;
    for (let i = 0; i < dayBonusTable.length; i++) {
      if (days < dayBonusTable[i].day) break;
      bonus = dayBonusTable[i].bonus;
    }
    return bonus;
  }

  function getBaseRate(invest) { // promo ì¸ì ì œê±°
      if (invest < 1000) return 0.0050;
      if (invest < 5000) return 0.0053;
      if (invest < 10000) return 0.0055;
      return 0.0063;
  }

  function getBonusRAM(invest, days) {
    if (days < 120) return 0;
    if (invest < 1000) return 0;
    if (invest < 5000) return invest * 0.10;
    if (invest < 10000) return invest * 0.15;
    return invest * 0.20;
  }
  
  function getBonusRate(bonusRAM, applyRamPromotionChecked, mainInvestAmount) {
    if (bonusRAM === 0) return 0;

    // 'RAM í”„ë¡œëª¨ì…˜ ì ìš©' ì²´í¬ë°•ìŠ¤ í™œì„±í™” ì‹œ í•´ë‹¹ ë³´ìƒìœ¨ ì ìš©
    // RAM í”„ë¡œëª¨ì…˜ ì°¸ì—¬ ì¡°ê±´ (120ì¼ ì´ìƒ & 1000 USDT ì´ìƒ)ë„ ì—¬ê¸°ì„œ ì²´í¬
    if (applyRamPromotionChecked && mainInvestAmount >= 1000) { 
        if (mainInvestAmount >= 1000 && mainInvestAmount < 5000) return 0.0053; // 0.53%
        if (mainInvestAmount >= 5000 && mainInvestAmount < 10000) return 0.00578; // 0.578%
        if (mainInvestAmount >= 10000) return 0.00693; // 0.693%
    }
    // 'RAM í”„ë¡œëª¨ì…˜ ì ìš©' ì²´í¬ë°•ìŠ¤ê°€ ë¹„í™œì„±í™”ë˜ì—ˆê±°ë‚˜ ì¡°ê±´ ë¯¸ì¶©ì¡± ì‹œ ê¸°ë³¸ ë³´ë„ˆìŠ¤ ì´ìœ¨ ì ìš©
    if (bonusRAM < 1000) return 0.0050;
    if (bonusRAM < 5000) return 0.0053;
    if (bonusRAM < 10000) return 0.0055;
    return 0.0063;
  }


  window.calculateRam = function() {
    let invest = parseFloat(document.getElementById("invest").value);
    let days = parseInt(document.getElementById("days").value);
    
    const selectedMonth = document.getElementById("ramStartMonth").value;
    const selectedDay = document.getElementById("ramStartDay").value;
    const startDateStr = `2025-${selectedMonth}-${selectedDay}`;
    
    let hashBonus = parseFloat(document.getElementById("hash").value);
    let applyRamPromotion = document.getElementById("applyRamPromotion").checked; // RAM í”„ë¡œëª¨ì…˜ ì ìš© ì²´í¬ë°•ìŠ¤ ê°’


    if (isNaN(invest) || isNaN(days) || !selectedMonth || !selectedDay) {
      document.getElementById("resultRam").innerHTML = "<div class='alert-box alert-warning'>ëª¨ë“  ê°’ì„ ì…ë ¥í•˜ì„¸ìš”!</div>";
      return;
    }

    let today = new Date();
    let start = new Date(startDateStr);
    
    if (isNaN(start.getTime())) {
        document.getElementById("resultRam").innerHTML = "<div class='alert-box alert-warning'>ìœ íš¨í•˜ì§€ ì•Šì€ ìŠ¤í…Œì´í‚¹ ì‹œì‘ì¼ì…ë‹ˆë‹¤!</div>";
        return;
    }

    let diffDays = Math.floor((today - start) / (1000 * 60 * 60 * 24));
    if (diffDays < 0) diffDays = 0;
    let remainDays = days - diffDays;
    if (remainDays < 0) remainDays = 0;

    let baseRate = getBaseRate(invest); // ê¸°ë³¸ ì´ìœ¨ ì‚¬ìš©
    let dayBonus = getDayBonus(days);
    let dailyInterest_main = invest * baseRate * hashBonus * dayBonus;
    let total_main = dailyInterest_main * days;
    let recoveryDays_main = invest / dailyInterest_main;

    let bonusRAM = getBonusRAM(invest, days); // 10%, 15%, 20% ì¶”ê°€ ì˜ˆì¹˜ RAM
    // getBonusRateì— 'RAM í”„ë¡œëª¨ì…˜ ì ìš©' ì²´í¬ë°•ìŠ¤ ìƒíƒœì™€ ë©”ì¸ íˆ¬ì ê¸ˆì•¡ ì „ë‹¬
    let bonusRate = getBonusRate(bonusRAM, applyRamPromotion && days >= 120 && invest >= 1000, invest); 
    
    let dailyInterest_bonus = bonusRAM * bonusRate * hashBonus * 1.3; // 2400ì¼ ê³„ìˆ˜ ê³ ì •
    
    let bonus_interest_until_maturity = dailyInterest_bonus * days; 
    let bonus_interest_remaining = dailyInterest_bonus * (2400 - days);

    let total_until_maturity_combined = total_main + bonus_interest_until_maturity; 
    
    let total_main_received_so_far = dailyInterest_main * diffDays;
    let total_main_remaining_until_maturity = dailyInterest_main * remainDays;

    let total_bonus_received_so_far = dailyInterest_bonus * diffDays;
    let total_bonus_remaining_until_maturity = dailyInterest_bonus * remainDays;

    let total_combined_received_so_far = total_main_received_so_far + total_bonus_received_so_far;
    let total_combined_remaining_until_maturity = total_main_remaining_until_maturity + total_bonus_remaining_until_maturity;

    let recoveryDays_total = invest / (dailyInterest_main + dailyInterest_bonus);

    let alertMsg = (recoveryDays_main > days)
      ? "<div class='alert-box alert-warning'>ğŸ”” ì•Œë¦¼: ë§Œê¸° ì¼ì´ ì›ê¸ˆ íšŒìˆ˜ ê¸°ê°„ë³´ë‹¤ ì§§ìŠµë‹ˆë‹¤.</div>"
      : "<div class='alert-box alert-success'>âœ… ì›ê¸ˆ íšŒìˆ˜ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>";

    let dailyWeeklyMonthlyDisplay = "";
    if (remainDays > 0) {
        let daily_total_for_remaining = dailyInterest_main + dailyInterest_bonus;
        dailyWeeklyMonthlyDisplay += "<div class='result-item'>ë§Œê¸°ì¼ê¹Œì§€ ë°›ì„ 1ì¼ ì´ì: <span class='highlight'>" + daily_total_for_remaining.toFixed(2) + "</span> USDT</div>";
        if (remainDays >= 7) {
            dailyWeeklyMonthlyDisplay += "<div class='result-item'>ë§Œê¸°ì¼ê¹Œì§€ ë°›ì„ 1ì£¼ì¼ ì´ì(7ì¼): <span class='highlight'>" + (daily_total_for_remaining * 7).toFixed(2) + "</span> USDT</div>";
        }
        if (remainDays >= 30) {
            dailyWeeklyMonthlyDisplay += "<div class='result-item'>ë§Œê¸°ì¼ê¹Œì§€ ë°›ì„ 1ë‹¬ ì´ì(30ì¼): <span class='highlight'>" + (daily_total_for_remaining * 30).toFixed(2) + "</span> USDT</div>";
        }
    }


    document.getElementById("resultRam").innerHTML = 
      alertMsg +
      "<div class='result-section main-box'><div class='result-title'>[ë‚´ê°€ êµ¬ë§¤í•œ RAM]</div>" +
      "<div class='result-item'>íˆ¬ì ê¸ˆì•¡: <span class='highlight'>" + invest.toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ì¼ì¼ ì´ì: <span class='highlight'>" + dailyInterest_main.toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ì´ ì´ì(" + days + "ì¼): <span class='highlight'>" + total_main.toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ì›ê¸ˆ íšŒìˆ˜ ì˜ˆìƒì¼: <span class='highlight'>ì•½ " + Math.ceil(recoveryDays_main) + " ì¼</span></div>" +
      "<div class='result-item'>í˜„ì¬ê¹Œì§€ ë°›ì€ ì´ ì´ì: <span class='highlight'>" + total_main_received_so_far.toFixed(2) + "</span> USDT</div>" + 
      "<div class='result-item'>ë§Œê¸°ì¼ ê¹Œì§€ ë‚¨ì€ ì´ ì´ì: <span class='highlight'>" + total_main_remaining_until_maturity.toFixed(2) + "</span> USDT</div></div>" + 

      "<div class='result-section bonus-box'><div class='result-title'>[í”„ë¡œëª¨ì…˜ ë³´ë„ˆìŠ¤ RAM]</div>" +
      "<div class='result-item'>ë³´ë„ˆìŠ¤ RAM: <span class='highlight'>" + bonusRAM.toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ì¼ì¼ ì´ì: <span class='highlight'>" + dailyInterest_bonus.toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ë§Œê¸°ì¼ê¹Œì§€ ì´ì(" + days + "ì¼): <span class='highlight'>" + bonus_interest_until_maturity.toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ë‚¨ì€ ê¸°ê°„ ì´ì(" + Math.max(0, 2400 - days) + "ì¼): <span class='highlight'>" + bonus_interest_remaining.toFixed(2) + "</span> USDT</div></div>" + 
      "<div class='result-item'>í˜„ì¬ê¹Œì§€ ë°›ì€ ì´ ì´ì: <span class='highlight'>" + total_bonus_received_so_far.toFixed(2) + "</span> USDT</div>" + 
      "<div class='result-item'>ë§Œê¸°ì¼ ê¹Œì§€ ë‚¨ì€ ì´ ì´ì: <span class='highlight'>" + total_bonus_remaining_until_maturity.toFixed(2) + "</span> USDT</div></div>" + 

      "<div class='result-section total-box'><div class='result-title'>[ì´ í•©ê³„]</div>" +
      "<div class='result-item'>ìŠ¤í…Œì´í‚¹ ì§„í–‰: <span class='highlight'>" + diffDays + "ì¼ ê²½ê³¼ / " + remainDays + "ì¼ ë‚¨ìŒ</span></div>" +
      "<div class='result-item'>í˜„ì¬ê¹Œì§€ ë°›ì€ ì´ ì´ì(ìŠ¤í…Œì´í‚¹+ë³´ë„ˆìŠ¤): <span class='highlight'>" + total_combined_received_so_far.toFixed(2) + "</span> USDT</div>" + 
      "<div class='result-item'>ë§Œê¸°ì¼ ê¹Œì§€ ë‚¨ì€ ì´ ì´ì(ìŠ¤í…Œì´í‚¹+ë³´ë„ˆìŠ¤): <span class='highlight'>" + total_combined_remaining_until_maturity.toFixed(2) + "</span> USDT</div>" + 
      "<div class='result-item'>ë§Œê¸°ì¼ê¹Œì§€ ë°›ëŠ” ì´ ì´ì(ìŠ¤í…Œì´í‚¹+ë³´ë„ˆìŠ¤): <span class='highlight'>" + total_until_maturity_combined.toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ì›ê¸ˆ íšŒìˆ˜ ì˜ˆìƒ(ë³´ë„ˆìŠ¤ í¬í•¨): <span class='highlight'>ì•½ " + Math.ceil(recoveryDays_total) + " ì¼</span></div>" +
      dailyWeeklyMonthlyDisplay + 
      "</div>";
  };


  // ==========================================================
  // CPI ê³„ì‚°ê¸° ë¡œì§
  // ==========================================================
  const cpiStartMonthSelect = document.getElementById("cpiStartMonth");
  const cpiStartDaySelect = document.getElementById("cpiStartDay");

  // CPI ê³„ì‚°ê¸°ìš© ì›”/ì¼ ë“œë¡­ë‹¤ìš´ ì±„ìš°ê¸°
  function populateCpiDays(month, year) {
    cpiStartDaySelect.innerHTML = '';
    const daysInMonth = new Date(year, month, 0).getDate();
    for (let i = 1; i <= daysInMonth; i++) {
      const option = document.createElement("option");
      option.value = i.toString().padStart(2, '0');
      option.textContent = i + "ì¼";
      cpiStartDaySelect.appendChild(option);
    }
  }
  for (let i = 1; i <= 12; i++) {
    const option = document.createElement("option");
    option.value = i.toString().padStart(2, '0');
    option.textContent = i + "ì›”";
    cpiStartMonthSelect.appendChild(option);
  }
  cpiStartMonthSelect.addEventListener("change", function() {
    const selectedMonth = parseInt(this.value);
    populateCpiDays(selectedMonth, 2025);
  });
  const todayCpi = new Date(); // CPI ê³„ì‚°ê¸°ìš© ì˜¤ëŠ˜ ë‚ ì§œ
  const currentCpiMonth = todayCpi.getMonth() + 1;
  const currentCpiDay = todayCpi.getDate();
  cpiStartMonthSelect.value = currentCpiMonth.toString().padStart(2, '0');
  populateCpiDays(currentCpiMonth, 2025);
  cpiStartDaySelect.value = currentCpiDay.toString().padStart(2, '0');


  window.calculateCpiGrowth = function() {
    let initialInvest = parseFloat(document.getElementById("initialInvest").value);
    const selectedMonth = document.getElementById("cpiStartMonth").value;
    const selectedDay = document.getElementById("cpiStartDay").value;
    const startDateStr = `2025-${selectedMonth}-${selectedDay}`;
    const applyCpiPromotion = document.getElementById("applyCpiPromotion").checked; // í”„ë¡œëª¨ì…˜ ì ìš© ì—¬ë¶€

    if (isNaN(initialInvest) || initialInvest <= 0 || !selectedMonth || !selectedDay) {
        document.getElementById("resultCpi").innerHTML = "<div class='alert-box alert-warning'>ì´ˆê¸° íˆ¬ì ê¸ˆì•¡ê³¼ ìŠ¤í…Œì´í‚¹ ì‹œì‘ì¼ì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”!</div>";
        return;
    }

    const dailyYieldRate = 0.01; // ë©”ì¸ CPI ì¼ì¼ 1% ìˆ˜ìµë¥ 
    const promoDailyYieldRate = 0.02; // í”„ë¡œëª¨ì…˜ ë³´ë„ˆìŠ¤ USDL ì¼ì¼ 2% ìˆ˜ìµë¥ 
    const promoMinInvest = 1000; // í”„ë¡œëª¨ì…˜ ìµœì†Œ íˆ¬ì ê¸ˆì•¡
    const reinvestCycleDays = 7; // ì¬íˆ¬ì ì£¼ê¸° 7ì¼
    const minReinvestAmount = 50; // ìµœì†Œ ì¬íˆ¬ì ê¸ˆì•¡ 50 USDT

    let currentCpiMainInvest = initialInvest; // ë³µë¦¬ë˜ëŠ” ë©”ì¸ CPI ìì‚° (íˆ¬ìê¸ˆ + ì¬íˆ¬ìëœ ì´ì)
    let promotionBonusFixedAmount = 0; // ê³ ì •ëœ í”„ë¡œëª¨ì…˜ ë³´ë„ˆìŠ¤ USDL ìì‚°

    // í”„ë¡œëª¨ì…˜ ì ìš© ì—¬ë¶€ ë° ì¡°ê±´ í™•ì¸
    if (applyCpiPromotion && initialInvest >= promoMinInvest) {
        promotionBonusFixedAmount = initialInvest * 0.10;
    }

    let totalGeneratedInterest = 0; // ì‹œë®¬ë ˆì´ì…˜ ê¸°ê°„ ë™ì•ˆ ì´ ë°œìƒí•œ ì´ì (ë©”ì¸+ë³´ë„ˆìŠ¤)
    let totalReinvestedAmount = 0; // ì‹œë®¬ë ˆì´ì…˜ ê¸°ê°„ ë™ì•ˆ ì´ ì¬íˆ¬ìëœ ê¸ˆì•¡
    let totalReinvestmentCount = 0; // ì‹œë®¬ë ˆì´ì…˜ ê¸°ê°„ ë™ì•ˆ ì´ ì¬íˆ¬ì íšŸìˆ˜
    let accumulatedInterestForReinvest = 0; // ì¬íˆ¬ìë¥¼ ìœ„í•´ ìŒ“ì´ëŠ” ì´ì

    let target2x = initialInvest * 2;
    let target3x = initialInvest * 3;
    let target4x = initialInvest * 4;

    let daysTo2x = "ë¯¸ë‹¬ì„±";
    let daysTo3x = "ë¯¸ë‹¬ì„±";
    let daysTo4x = "ë¯¸ë‹¬ì„±";
    let maxSimulationDays = 365 * 10; // ìµœëŒ€ 10ë…„ ì‹œë®¬ë ˆì´ì…˜ (ë„ˆë¬´ ê¸¸ì–´ì§€ëŠ” ê²ƒ ë°©ì§€)

    const todayDate = new Date();
    const startDate = new Date(startDateStr);
    if (isNaN(startDate.getTime())) {
        document.getElementById("resultCpi").innerHTML = "<div class='alert-box alert-warning'>ìœ íš¨í•˜ì§€ ì•Šì€ ìŠ¤í…Œì´í‚¹ ì‹œì‘ì¼ì…ë‹ˆë‹¤!</div>";
        return;
    }
    const daysPassedSinceStart = Math.floor((todayDate - startDate) / (1000 * 60 * 60 * 24));
    
    let daysSimulated = 0; // ì‹œë®¬ë ˆì´ì…˜ì„ ì‹œì‘í•œ ë‚ ë¶€í„°ì˜ ê²½ê³¼ ì¼ìˆ˜ (2x, 3x, 4x ê³„ì‚°ìš©)

    while (currentCpiMainInvest < target4x && daysSimulated < maxSimulationDays) {
        daysSimulated++; // í•˜ë£¨ ê²½ê³¼

        let dailyInterestMain = currentCpiMainInvest * dailyYieldRate;
        let dailyInterestPromoBonus = promotionBonusFixedAmount * promoDailyYieldRate;
        let totalDailyInterest = dailyInterestMain + dailyInterestPromoBonus; // ë©”ì¸+í”„ë¡œëª¨ì…˜ ë³´ë„ˆìŠ¤ ì´ì í•©ì‚°

        totalGeneratedInterest += totalDailyInterest;
        accumulatedInterestForReinvest += totalDailyInterest;

        if ((daysSimulated % reinvestCycleDays === 0) && (accumulatedInterestForReinvest >= minReinvestAmount)) {
            currentCpiMainInvest += accumulatedInterestForReinvest; // CPI ì´ì•¡ì— ì¬íˆ¬ì
            totalReinvestedAmount += accumulatedInterestForReinvest;
            totalReinvestmentCount++;
            accumulatedInterestForReinvest = 0;
        }

        if (daysTo2x === "ë¯¸ë‹¬ì„±" && currentCpiMainInvest >= target2x) { // 2ë°° ëª©í‘œëŠ” ë©”ì¸ íˆ¬ìê¸ˆ ê¸°ì¤€ìœ¼ë¡œ ë‹¬ì„± í™•ì¸
            daysTo2x = daysSimulated;
        }
        if (daysTo3x === "ë¯¸ë‹¬ì„±" && currentCpiMainInvest >= target3x) { // 3ë°° ëª©í‘œë„ ë©”ì¸ íˆ¬ìê¸ˆ ê¸°ì¤€
            daysTo3x = daysSimulated;
        }
        if (daysTo4x === "ë¯¸ë‹¬ì„±" && currentCpiMainInvest >= target4x) { // 4ë°° ëª©í‘œë„ ë©”ì¸ íˆ¬ìê¸ˆ ê¸°ì¤€
            daysTo4x = daysSimulated;
        }
    }
    
    // í˜„ì¬ ìŠ¤í…Œì´í‚¹ ì •ë³´ ê³„ì‚° (ì‚¬ìš©ìê°€ ì„¤ì •í•œ ì‹œì‘ì¼ë¶€í„° í˜„ì¬ê¹Œì§€)
    let currentCpiMainInvestAtToday = initialInvest; // í˜„ì¬ ì‹œì ê¹Œì§€ ë³µë¦¬ëœ ë©”ì¸ CPI ìì‚°
    let todayPromotionBonusFixedAmount = 0; // ì˜¤ëŠ˜ê¹Œì§€ì˜ í”„ë¡œëª¨ì…˜ ë³´ë„ˆìŠ¤ USDL ìì‚° (ê³ ì •)

    if (applyCpiPromotion && initialInvest >= promoMinInvest) {
        todayPromotionBonusFixedAmount = initialInvest * 0.10;
    }

    let currentAccumulatedInterestForReinvest = 0;
    let todayReinvestCount = 0;
    let todayReinvestedAmount = 0;

    for (let day = 1; day <= daysPassedSinceStart; day++) {
        let dailyInterestMain = currentCpiMainInvestAtToday * dailyYieldRate;
        let dailyInterestPromoBonus = todayPromotionBonusFixedAmount * promoDailyYieldRate;
        let totalDailyInterest = dailyInterestMain + dailyInterestPromoBonus;

        currentAccumulatedInterestForReinvest += totalDailyInterest;

        if ((day % reinvestCycleDays === 0) && (currentAccumulatedInterestForReinvest >= minReinvestAmount)) {
            currentCpiMainInvestAtToday += currentAccumulatedInterestForReinvest;
            todayReinvestedAmount += currentAccumulatedInterestForReinvest;
            todayReinvestCount++;
            currentAccumulatedInterestForReinvest = 0;
        }
    }

    // ë‹¤ìŒ ì¬íˆ¬ìê¹Œì§€ ë‚¨ì€ ì¼ìˆ˜ ê³„ì‚°
    let daysToNextReinvestCycle = reinvestCycleDays - (daysPassedSinceStart % reinvestCycleDays);
    if (daysToNextReinvestCycle === reinvestCycleDays) {
        daysToNextReinvestCycle = 7;
    }
    if (daysPassedSinceStart < 0) { // ìŠ¤í…Œì´í‚¹ ì‹œì‘ì¼ì´ ë¯¸ë˜ì¼ ê²½ìš°
        daysToNextReinvestCycle = 7;
    }

    // ìµœì¢… ê²°ê³¼ ì¶œë ¥
    document.getElementById("resultCpi").innerHTML = 
      "<div class='result-section cpi-main-box'>" + 
      "<div class='result-title'>[ë‚´ê°€ ìŠ¤í…Œì´í‚¹í•œ CPI (USDT)]</div>" +
      "<div class='result-item'>ì´ˆê¸° íˆ¬ì ê¸ˆì•¡: <span class='highlight'>" + initialInvest.toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ì‹œë®¬ë ˆì´ì…˜ í›„ ìµœì¢… CPI: <span class='highlight'>" + currentCpiMainInvest.toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ì˜¤ëŠ˜ ê¸°ì¤€ CPI: <span class='highlight'>" + currentCpiMainInvestAtToday.toFixed(2) + "</span> USDT</div>" +
      "</div>";
      
    if (promotionBonusFixedAmount > 0) {
        document.getElementById("resultCpi").innerHTML += 
            "<div class='result-section cpi-bonus-box'>" + 
            "<div class='result-title'>[í”„ë¡œëª¨ì…˜ ë³´ë„ˆìŠ¤ USDL]</div>" +
            "<div class='result-item'>ë³´ë„ˆìŠ¤ USDL ê¸ˆì•¡: <span class='highlight'>" + promotionBonusFixedAmount.toFixed(2) + "</span> USDT (ê³ ì •)</div>" +
            "<div class='result-item'>ì˜¤ëŠ˜ ê¸°ì¤€ ë³´ë„ˆìŠ¤ USDL: <span class='highlight'>" + todayPromotionBonusFixedAmount.toFixed(2) + "</span> USDT</div>" +
            "</div>";
    }

    document.getElementById("resultCpi").innerHTML +=
      "<div class='result-section cpi-summary-box'>" + 
      "<div class='result-title'>CPI ì„±ì¥ ëª©í‘œ ë‹¬ì„± ì‹œì  ì˜ˆì¸¡</div>" +
      "<div class='result-item'>ì´ˆê¸° íˆ¬ìê¸ˆ ëŒ€ë¹„ 2ë°° ë‹¬ì„± ì‹œì : <span class='highlight'>" + daysTo2x + "</span> ì¼ì°¨</div>" +
      "<div class='result-item'>ì´ˆê¸° íˆ¬ìê¸ˆ ëŒ€ë¹„ 3ë°° ë‹¬ì„± ì‹œì : <span class='highlight'>" + daysTo3x + "</span> ì¼ì°¨</div>" +
      "<div class='result-item'>ì´ˆê¸° íˆ¬ìê¸ˆ ëŒ€ë¹„ 4ë°° ë‹¬ì„± ì‹œì : <span class='highlight'>" + daysTo4x + "</span> ì¼ì°¨</div>" +
      "</div>" +

      "<div class='result-section cpi-summary-box'>" + 
      "<div class='result-title'>ì´ ì‹œë®¬ë ˆì´ì…˜ ìš”ì•½ (" + daysSimulated + "ì¼ ê¸°ì¤€)</div>" +
      "<div class='result-item'>ìµœì¢… ì´ CPI (í”„ë¡œëª¨ì…˜ ë³´ë„ˆìŠ¤ í¬í•¨): <span class='highlight'>" + (currentCpiMainInvest + promotionBonusFixedAmount).toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ì´ CPI í•´ì œëŸ‰ (ëˆ„ì ): <span class='highlight'>" + totalGeneratedInterest.toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ì´ ì¬íˆ¬ìëœ CPI ë°°í¬: <span class='highlight'>" + totalReinvestedAmount.toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ì´ ì¬íˆ¬ì íšŸìˆ˜: <span class='highlight'>" + totalReinvestmentCount + "</span> íšŒ</div>" +
      "</div>" +

      "<div class='result-section cpi-summary-box'>" + 
      "<div class='result-title'>My CPI (ì˜¤ëŠ˜ ê¸°ì¤€)</div>" +
      "<div class='result-item'>ìŠ¤í…Œì´í‚¹ ì‹œì‘ì¼ë¡œë¶€í„°: <span class='highlight'>" + daysPassedSinceStart + "</span> ì¼ ê²½ê³¼</div>" +
      "<div class='result-item'>ì˜¤ëŠ˜ ê¸°ì¤€ ì´ CPI (í”„ë¡œëª¨ì…˜ ë³´ë„ˆìŠ¤ í¬í•¨): <span class='highlight'>" + (currentCpiMainInvestAtToday + todayPromotionBonusFixedAmount).toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ì˜¤ëŠ˜ê¹Œì§€ ì¬íˆ¬ìëœ ê¸ˆì•¡: <span class='highlight'>" + todayReinvestedAmount.toFixed(2) + "</span> USDT</div>" +
      "<div class='result-item'>ì˜¤ëŠ˜ê¹Œì§€ ì¬íˆ¬ì íšŸìˆ˜: <span class='highlight'>" + todayReinvestCount + "</span> íšŒ</div>" +
      "<div class='result-item'>ë‹¤ìŒ ì¬íˆ¬ìê¹Œì§€: <span class='highlight'>" + daysToNextReinvestCycle + "</span> ì¼ ë‚¨ìŒ</div>" +
      "</div>";
  };
});
</script>
</body>
</html>
